# Requirements Document

## Introduction

El Analizador de Código de Vulnerabilidades es una funcionalidad educativa interactiva que permite a los estudiantes y profesionales de ciberseguridad estudiar vulnerabilidades de código mediante ejemplos prácticos. Los usuarios pueden visualizar código fuente con sintaxis resaltada y seleccionar las líneas específicas donde se encuentran las vulnerabilidades.

## Glossary

- **Vulnerability_Analyzer**: Sistema que presenta código con vulnerabilidades para análisis educativo
- **Code_Block**: Fragmento de código fuente mostrado con numeración de líneas y sintaxis resaltada
- **Vulnerability_Line**: Línea específica del código que contiene una vulnerabilidad de seguridad
- **Selection_Interface**: Interfaz que permite al usuario seleccionar líneas de código como respuesta
- **Feedback_System**: Sistema que proporciona retroalimentación sobre la selección del usuario
- **Syntax_Highlighter**: Componente que aplica colores y formato al código según el lenguaje de programación

## Requirements

### Requirement 1

**User Story:** Como estudiante de ciberseguridad, quiero visualizar código fuente con vulnerabilidades, para poder identificar y aprender sobre diferentes tipos de vulnerabilidades de seguridad.

#### Acceptance Criteria

1. WHEN el sistema muestra un fragmento de código, THE Vulnerability_Analyzer SHALL renderizar el código con sintaxis resaltada según el lenguaje de programación
2. WHEN se presenta código, THE Code_Block SHALL mostrar numeración de líneas visible y clara
3. WHEN el código se renderiza, THE Syntax_Highlighter SHALL aplicar colores diferenciados para palabras clave, strings, comentarios y operadores
4. THE Vulnerability_Analyzer SHALL soportar múltiples lenguajes de programación (C, C++, Java, JavaScript, Python, PHP)
5. WHEN el código contiene caracteres especiales, THE Code_Block SHALL escapar correctamente los caracteres HTML para evitar inyección

### Requirement 2

**User Story:** Como usuario del sistema, quiero poder seleccionar líneas específicas de código, para indicar dónde creo que se encuentra la vulnerabilidad.

#### Acceptance Criteria

1. WHEN el usuario hace clic en una línea de código, THE Selection_Interface SHALL marcar visualmente la línea como seleccionada
2. WHEN una línea está seleccionada, THE Selection_Interface SHALL permitir deseleccionarla haciendo clic nuevamente
3. THE Selection_Interface SHALL permitir selección múltiple de líneas no consecutivas
4. WHEN el usuario selecciona líneas, THE Selection_Interface SHALL mantener un estado visual claro de las líneas seleccionadas
5. THE Selection_Interface SHALL proporcionar un botón "Verificar Respuesta" para confirmar la selección

### Requirement 3

**User Story:** Como estudiante, quiero recibir retroalimentación inmediata sobre mi selección, para aprender de mis errores y confirmar mi comprensión.

#### Acceptance Criteria

1. WHEN el usuario confirma su selección, THE Feedback_System SHALL comparar las líneas seleccionadas con las líneas correctas
2. WHEN la selección es correcta, THE Feedback_System SHALL mostrar un mensaje de éxito con explicación de la vulnerabilidad
3. WHEN la selección es incorrecta, THE Feedback_System SHALL resaltar las líneas correctas y explicar por qué son vulnerables
4. THE Feedback_System SHALL mostrar el tipo de vulnerabilidad encontrada (Buffer Overflow, SQL Injection, etc.)
5. WHEN se muestra retroalimentación, THE Feedback_System SHALL incluir una explicación detallada de cómo explotar y mitigar la vulnerabilidad

### Requirement 4

**User Story:** Como desarrollador del sistema, quiero una estructura de datos flexible para las preguntas de código, para poder agregar fácilmente nuevos ejemplos de vulnerabilidades.

#### Acceptance Criteria

1. THE Vulnerability_Analyzer SHALL utilizar una estructura JSON para definir preguntas de código
2. WHEN se define una pregunta, THE estructura SHALL incluir: código fuente, lenguaje, líneas vulnerables, tipo de vulnerabilidad y explicación
3. THE estructura de datos SHALL soportar múltiples vulnerabilidades en el mismo fragmento de código
4. WHEN se agrega una nueva pregunta, THE sistema SHALL validar que el código y las líneas vulnerables sean consistentes
5. THE estructura SHALL incluir metadatos como dificultad, categoría de vulnerabilidad y referencias educativas

### Requirement 5

**User Story:** Como instructor, quiero poder categorizar las vulnerabilidades por tipo y dificultad, para crear rutas de aprendizaje progresivas.

#### Acceptance Criteria

1. THE Vulnerability_Analyzer SHALL clasificar vulnerabilidades por tipo (OWASP Top 10, CWE, etc.)
2. WHEN se presenta una pregunta, THE sistema SHALL mostrar el nivel de dificultad (Básico, Intermedio, Avanzado)
3. THE sistema SHALL permitir filtrar preguntas por tipo de vulnerabilidad
4. WHEN el usuario completa preguntas, THE sistema SHALL trackear el progreso por categoría
5. THE Vulnerability_Analyzer SHALL sugerir preguntas relacionadas basadas en el rendimiento del usuario

### Requirement 6

**User Story:** Como usuario, quiero una interfaz responsive y accesible, para poder usar el sistema en diferentes dispositivos y con tecnologías asistivas.

#### Acceptance Criteria

1. THE Selection_Interface SHALL ser completamente navegable usando solo el teclado
2. WHEN se usa un lector de pantalla, THE Code_Block SHALL proporcionar descripciones alt apropiadas
3. THE interfaz SHALL mantener contraste suficiente entre texto y fondo según WCAG 2.1
4. WHEN se accede desde dispositivos móviles, THE Code_Block SHALL ser scrolleable horizontalmente si es necesario
5. THE Vulnerability_Analyzer SHALL funcionar correctamente en navegadores modernos (Chrome, Firefox, Safari, Edge)

### Requirement 7

**User Story:** Como administrador del contenido, quiero poder validar y sanitizar el código de entrada, para prevenir vulnerabilidades en el propio sistema educativo.

#### Acceptance Criteria

1. WHEN se ingresa código fuente, THE sistema SHALL escapar todos los caracteres HTML especiales
2. THE Vulnerability_Analyzer SHALL validar que el código no contenga scripts maliciosos
3. WHEN se procesa código, THE sistema SHALL usar Content Security Policy para prevenir XSS
4. THE sistema SHALL validar que las líneas vulnerables especificadas existan en el código
5. WHEN se almacena contenido, THE sistema SHALL sanitizar todas las entradas de usuario